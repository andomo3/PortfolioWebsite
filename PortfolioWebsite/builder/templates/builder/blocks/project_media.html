{% load builder_extras static %}
<section class="py-3 project-media-block">
  {% if props.embedUrl %}
    <div class="project-media-embed" style="--embed-height: {{ props.embedHeight|default:'720' }}px;">
      <iframe
        class="project-media-embed-frame"
        src="{{ props.embedUrl }}"
        title="{{ props.mediaAlt|default:'Project embed' }}"
        loading="lazy"
        allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"
        allowfullscreen
      ></iframe>
    </div>
  {% elif props.mediaUrl %}
    {% if props.mediaType == "video" %}
      {% if "drive.google.com" in props.mediaUrl or "youtube.com" in props.mediaUrl or "youtu.be" in props.mediaUrl %}
        <div class="project-media-embed" style="--embed-height: {{ props.embedHeight|default:'720' }}px;">
          <iframe
            class="project-media-embed-frame"
            src="{{ props.mediaUrl }}"
            title="{{ props.mediaAlt|default:'Project embed' }}"
            allow="autoplay; clipboard-write; encrypted-media; picture-in-picture"
            allowfullscreen
          ></iframe>
        </div>
      {% else %}
        <video class="project-media" src="{{ props.mediaUrl }}" controls playsinline></video>
      {% endif %}
    {% else %}
      <img class="project-media" src="{% static 'images/' %}{{ props.mediaUrl }}.jpg" alt="{{ props.mediaAlt|default:'Project media' }}">
    {% endif %}
  {% else %}
    <div class="embed-slot">Add a project media path (relative to static/images) or embed URL.</div>
  {% endif %}
</section>
